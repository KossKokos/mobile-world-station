{% extends 'core/base.html' %}
{% load static %}

{% block title %}Hot Deals | MobileWorldStation{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/deals.css' %}">
{% endblock %}

{% block content %}
<!-- Page Header -->
<section class="deals-header">
    <div class="container">
        <h1>Today's Best Deals</h1>
        <div class="breadcrumb">
            <a href="{% url 'core:home' %}">Home</a>
            <span>/</span>
            <a href="{% url 'core:deals' %}">Deals</a>
        </div>
        <p class="subtitle">Limited-time offers on phones, accessories, and bundles</p>
    </div>
</section>

<!-- Deal Categories -->
<section class="deal-categories">
    <div class="container">
        <div class="category-tabs">
            <button class="tab-btn active" data-category="all">All Deals</button>
            <button class="tab-btn" data-category="phones">Phones</button>
            <button class="tab-btn" data-category="accessories">Accessories</button>
            <button class="tab-btn" data-category="bundles">Bundles</button>
        </div>
    </div>
</section>

<!-- Flash Sale Banner -->
<section class="flash-sale">
    <div class="container">
        <div class="sale-banner">
            <div class="sale-content">
                <span class="sale-badge">FLASH SALE</span>
                <h2>24-Hour Phone Blowout</h2>
                <p>Ends in <span id="countdown">23:59:59</span></p>
                <a href="#featured-deals" class="btn btn-white">Shop Now</a>
            </div>
        </div>
    </div>
</section>

<!-- Featured Deals -->
<section class="featured-deals" id="featured-deals">
    <div class="container">
        <h2 class="section-title">Featured Deals</h2>
        
        <div class="deals-grid">
            <!-- Deal 1 -->
            <div class="deal-card" data-category="phones">
                <div class="deal-badge">50% OFF</div>
                <div class="deal-img">
                    <img src="{% static 'images/deals/phone-deal.jpg' %}" alt="Premium Smartphone">
                </div>
                <div class="deal-info">
                    <h3>Premium Smartphone X</h3>
                    <div class="price">
                        <span class="current-price">$499.99</span>
                        <span class="original-price">$999.99</span>
                    </div>
                    <div class="deal-meta">
                        <span><i class="fas fa-star"></i> 4.8 (256 reviews)</span>
                        <span><i class="fas fa-bolt"></i> 12 sold today</span>
                    </div>
                    <a href="#" class="btn">Add to Cart</a>
                </div>
            </div>
            
            <!-- Deal 2 -->
            <div class="deal-card" data-category="bundles">
                <div class="deal-badge">BUNDLE</div>
                <div class="deal-img">
                    <img src="{% static 'images/deals/bundle-deal.jpg' %}" alt="Phone + Accessories Bundle">
                </div>
                <div class="deal-info">
                    <h3>Ultimate Starter Bundle</h3>
                    <div class="price">
                        <span class="current-price">$299.99</span>
                        <span class="original-price">$459.99</span>
                    </div>
                    <div class="deal-meta">
                        <span><i class="fas fa-star"></i> 4.9 (189 reviews)</span>
                        <span><i class="fas fa-bolt"></i> 8 sold today</span>
                    </div>
                    <a href="#" class="btn">Add to Cart</a>
                </div>
            </div>
            
            <!-- Deal 3 -->
            <div class="deal-card" data-category="accessories">
                <div class="deal-badge">30% OFF</div>
                <div class="deal-img">
                    <img src="{% static 'images/deals/earbuds-deal.jpg' %}" alt="Wireless Earbuds">
                </div>
                <div class="deal-info">
                    <h3>Pro Wireless Earbuds</h3>
                    <div class="price">
                        <span class="current-price">$69.99</span>
                        <span class="original-price">$99.99</span>
                    </div>
                    <div class="deal-meta">
                        <span><i class="fas fa-star"></i> 4.7 (342 reviews)</span>
                        <span><i class="fas fa-bolt"></i> 24 sold today</span>
                    </div>
                    <a href="#" class="btn">Add to Cart</a>
                </div>
            </div>
            
            <!-- Deal 4 -->
            <div class="deal-card" data-category="phones">
                <div class="deal-badge">NEW</div>
                <div class="deal-img">
                    <img src="{% static 'images/deals/new-phone.jpg' %}" alt="Latest Smartphone">
                </div>
                <div class="deal-info">
                    <h3>Latest Model Z</h3>
                    <div class="price">
                        <span class="current-price">$799.99</span>
                        <span class="original-price">$899.99</span>
                    </div>
                    <div class="deal-meta">
                        <span><i class="fas fa-star"></i> 4.6 (87 reviews)</span>
                        <span><i class="fas fa-bolt"></i> 15 sold today</span>
                    </div>
                    <a href="#" class="btn">Add to Cart</a>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Weekly Deals -->
<section class="weekly-deals">
    <div class="container">
        <h2 class="section-title">Weekly Specials</h2>
        <p class="section-subtitle">New deals added every Monday</p>
        
        <div class="deals-carousel">
            <!-- Deal items would go here -->
            <div class="deal-item">
                <img src="{% static 'images/deals/weekly-1.jpg' %}" alt="Weekly Deal 1">
                <h3>Case & Screen Protector</h3>
                <div class="price">$19.99 <span>$34.99</span></div>
            </div>
            <div class="deal-item">
                <img src="{% static 'images/deals/weekly-2.jpg' %}" alt="Weekly Deal 2">
                <h3>Fast Wireless Charger</h3>
                <div class="price">$24.99 <span>$39.99</span></div>
            </div>
            <div class="deal-item">
                <img src="{% static 'images/deals/weekly-3.jpg' %}" alt="Weekly Deal 3">
                <h3>Bluetooth Speaker</h3>
                <div class="price">$49.99 <span>$79.99</span></div>
            </div>
        </div>
    </div>
</section>

<!-- Newsletter -->
<section class="deals-newsletter">
    <div class="container">
        <div class="newsletter-box">
            <h2>Get Exclusive Deals</h2>
            <p>Subscribe to our newsletter and be the first to know about special offers</p>
            <form class="newsletter-form">
                <input type="email" placeholder="Enter your email" required>
                <button type="submit" class="btn">Subscribe</button>
            </form>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Countdown timer
    function updateCountdown() {
        const now = new Date();
        const end = new Date();
        end.setHours(23, 59, 59, 999);
        
        const diff = end - now;
        
        const hours = Math.floor(diff / (1000 * 60 * 60));
        const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((diff % (1000 * 60)) / 1000);
        
        document.getElementById('countdown').textContent = 
            `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
    }
    
    setInterval(updateCountdown, 1000);
    updateCountdown();
    
    // Category tabs
    const tabBtns = document.querySelectorAll('.tab-btn');
    const dealCards = document.querySelectorAll('.deal-card');
    
    tabBtns.forEach(btn => {
        btn.addEventListener('click', function() {
            // Update active tab
            tabBtns.forEach(b => b.classList.remove('active'));
            this.classList.add('active');
            
            // Filter deals
            const category = this.dataset.category;
            dealCards.forEach(card => {
                if (category === 'all' || card.dataset.category === category) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        });
    });
    
    // Simple carousel animation for weekly deals
    const carousel = document.querySelector('.deals-carousel');
    let scrollAmount = 0;
    const scrollStep = 300;
    
    setInterval(() => {
        scrollAmount += scrollStep;
        if (scrollAmount > carousel.scrollWidth - carousel.clientWidth) {
            scrollAmount = 0;
        }
        carousel.scrollTo({
            left: scrollAmount,
            behavior: 'smooth'
        });
    }, 3000);
});
</script>
{% endblock %}